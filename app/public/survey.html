<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Friend Finder</title>
 		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	</head>

	<body>
		<div class="jumbotron jumbotron-fluid">
			<div class="container">
				<h1 class="display-4"><strong>Friend Finder</strong></h1>
			</div>
		</div>
		
		<div class="container">
		<h2><strong>Survey Questions</strong></h2>
		
		<h3>Your First Name</h3>
		<input type="text" class="form-control" id="name">

		<h3>Link to your picture</h3>
		<input type="text" class="form-control" id="photo">
		
		
			<h3>Question 1</h3>
				<p>When you drop food on the ground, you adhere to the "5 second rule"</p>
					<select class="custom-select" id="q1">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>
			<h3>Question 2</h3>
				<p>You don't look up the weather before going outside - you prefer the surprise</p>
					<select class="custom-select" id="q2">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 3</h3>
				<p>When it rains, you like to pretend the drops on the window are racing and root for one to win</p>
					<select class="custom-select" id="q3">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 4</h3>
				<p>You like your television volume in increments of 5</p>
					<select class="custom-select" id="q4">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 5</h3>
				<p>You are somewhat embarrassed by your Youtube "Recommended for You" videos</p>
					<select class="custom-select" id="q5">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 6</h3>
				<p>You haven't successfully matched a pair of socks in 3 years</p>
					<select class="custom-select" id="q6">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 7</h3>
				<p>You love a good pun</p>
					<select class="custom-select" id="q7">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 8</h3>
				<p>Hot dogs should never be boiled</p>
					<select class="custom-select" id="q8">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 9</h3>
				<p>You rehearse conversations you're going to have with people out loud when you're along (and you get really embarrassed when you get caught)</p>
					<select class="custom-select" id="q9">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>				
			<h3>Question 10</h3>
				<p>You strongly agree with this statement</p>
					<select class="custom-select" id="q10">
						<option selected>Choose a response</option>
						<option value="1" id="1">1 - Strongly disagree</option>
						<option value="2" id="2">2 - Mildly disagree</option>
						<option value="3" id="3">3 - So-so</option>
						<option value="4" id="4">4 - Mildly agree</option>
						<option value="5" id="5">5 - Strongly agree</option>
					</select>	
			<div style="margin-top: 20px">
				<a class="btn btn-primary btn-lg" id="submit" role="button">Find your friend!</a>
			</div>		
		</div>
		<br>
		<footer class="footer">
			<div class="container">
				<a href="/api/friends">Friends List</a>
				<a href="https://github.com/MattScuteri/friend_finder">GitHub Repo</a>
			</div>
		</footer>
		<div class="container" id="friend-match">
			<h2>Your friend match:</h2>
				<h3 id='friend-name'></h3>
				<img id='friend-img'>
		</div>
		<div class="modal" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Your friend match:</h5>
						<button type="button" class="class" data-dismiss="modal" aria-label="Close">
						</button>
					</div>
					<div class="modal-body">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-primary">Take the test again!</button>
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>	
	<script>
		$('#modal').hide();

		$('#submit').on('click', function(event) {
			event.preventDefault();

			let newFriend = {
				name: $('#name').val(),
				photo: $('#photo').val(),
				total: ($('#q1').val() + $('#q2').val() + $('#q3').val() + $('#q4').val() + $('#q5').val() + $('#q6').val() + $('#q7').val() + $('#q8').val() +	$('#q9').val() + $('#q10').val())
			};

			$.get("/api/friends", function(data) {
				let bestMatch = match(data)
				if(bestMatch.name !== undefined) {
					$('.modal-body').text('<p> Your new best friend is ' + bestMatch.name + '</p><img src="' + bestMatch.photo + '" height="45">');
				}
			}).then(function() {
				$('#modal').show();
				$.post('/api/friends', newFriend);
			});

			function match(data) {
				for (let i = 0; i < friends.length; i++) {
					let friendDifferenceArray = [];

					Math.abs(newFriend.total - friend[i].total)

					function friendDifference() {
						let minFriend = Math.min(friendDifferenceArray);
						return minFriend;
					}
				}
			}
		})
	</script>
	</body>
</html>